<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instalação de Pacotes via OPM: TDINotebook</title>
</head>
<body>
    <h1>Instalação de Pacotes via OPM: TDINotebook</h1>
    <hr>
    <p>Um jeito diferente de ao invés de abrir janelas modais(SDI) ou multiplos documentos(MDI) é 
    abrir usando tabs, método conhecido como TDI. A Interface TDI geralmente é usada de dois modos:
    (1) com varias tabs, similar ao Google Chrome ou Firefox onde cada tab representa uma janela diferente
    e independente  e o TDINotebook já vem pronto para usar de modo, para quem estava acostumado 
    com a interface MDI talvez este método seja o mais aproximado ou (2) manter uma unica tab com a 
    "orelhinha" invisivel e fazer forms serem embutidos dentro delas e então com as "orelhinhas" invisiveis
    podemos trocar de tab onde cada uma delas (ou apenas uma) terá seu próprio form.</p>
    <p>O efeito visual é semelhante a este:</p>
    <video width="1024px" height="auto" controls>
        <source src="assets/exemplo_tdi.webm" type='video/webm; codecs="vp8, vorbis"'>
        Seu navegador não suporta webm ou a tab video.
    </video>
    <p>Repare que o aplicativo esta sempre se aproveitando da janela principal ao inves de criar uma nova
    janela sobre esta.</p>
    <p>Você pode usar método similar a opção #2 através da criação de um form dentro de um panel ou PageControl, 
    mas se o fizer deverá lembrar-se também de destruí-lo  manualmente e é aí que o TDINotebook ajuda, 
    pois ao fechar uma tab o que estiver dentro dela(um form) será destruido também. Também haverá menos
    código quando precisar retornar a uma janela anterior.</p>
    <p>Inclusive os aplicativos mobile usam este conceito de tabs, mas nenhum aplicativo se parece com 
    o Google Chrome ou Firefox porque apenas uma única tab fica visivel e a mesma é chaveada entre os 
    forms, mostrando apenas um form por vez.
    </p>
    <p>Se você gostou dessa abordagem então instale este componente.</p>
    <p>Maiores informações em:<br>
    <a href="https://wiki.freepascal.org/TTDINotebook">TTDINotebook - Lazarus wiki (freepascal.org)</a></p>
    <p>Escrevi uma demo onde você poderá ver na prática a simpicidade de criar programas dessa forma:</p>
    <a href="https://github.com/gladiston/demo_tdinotebook">Demo usando TTDINotebook</a></p>
    <p>Basicamente, você inclui o componente TDINotebook na sua janela principal e para o aplicativo não
    ter a cara de navegador Gooogle Chrome ou Firefox, você inclui essas linhas no OnCreate do seu form principal:</p>
    <p><textarea rows=29 cols=100 disabled>
  // Ele cobrirá a área inteira
  TDINoteBook1.Align:=alClient;
  // Se as suas janelas tiver um botão de fechar ou sair então é bom
  // esconder o botão de fechar "X" na tab
  //TDINoteBook1.CloseTabButtom:=tbNone;
  // nboHidePageListPopup: Não tem popup para mostrar as tabs(paginas)
  // nboShowAddTabButton: Não mostra opção para adicionar nova tab
  // nboShowCloseButtons: Botões de fechar não serão exibidos
  TDINoteBook1.Options:=[nboHidePageListPopup, nboShowAddTabButton, nboShowCloseButtons];
  // Não mostra a orelhinha das tabs
  TDINoteBook1.ShowTabs:=false;
  // Como se trata de um aplicativo comercial e não um navegador então
  // é melhor esconder outros botões
  TDINoteBook1.TDIActions.CloseAllTabs.Visible:=false;
  TDINoteBook1.TDIActions.CloseTab.Visible:=false;
  TDINoteBook1.TDIActions.NextTab.Visible:=false;
  TDINoteBook1.TDIActions.PreviousTab.Visible:=false;
  TDINoteBook1.TDIActions.TabsMenu.Visible:=false;
  // deixa ao menos 1 tab para servir de container de outros forms
  if TDINoteBook1.PageCount<1 then
    TDINoteBook1.AddTabSheet;
  // A primeira tab nunca poderá ser fechada
  // Isso garante que sempre terá uma tab
  TDINoteBook1.FixedPages:=0;              
  // Um TDINotebook não funciona sem um MainMenu para associar.
  // Isso é estranho, mas tenho que aceitar. A instrução abaixo
  // é inóqua, você tem de fazer a associação abaixo em tempo
  // de design   
</textarea></p>
    <p>Nos eventos em que pretende chamar uma janela, você tem que conferir se a mesma já não foi criada 
    e se positivamente não apenas mostrar, caso contrário, crie e mostre. Vamos ao código:</p>
<p><textarea rows=17 cols=100 disabled>
procedure TForm1.actClientesExecute(Sender: TObject);
var
    i:Integer;
begin
    i:=TDINoteBook1.FindFormInPages(fmClientes);
    if i<0 then  // não existe, então cria
    begin
      fmClientes:=TfmClientes.Create(Self);
      TDINoteBook1.ShowFormInPage(fmClientes, 0);
    end
    else
    begin
      // se existe, então é apenas embutir na tab 0
      TDINoteBook1.ShowFormInPage(fmClientes, 0);
    end;
end;  
</textarea></p>   
<p>O codigo acima é para ser didático, você que é experiente cortará metade dessas linhas.</p>
</body>
</html>
